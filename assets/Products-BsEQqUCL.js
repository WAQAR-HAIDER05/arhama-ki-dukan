import{d as p,u as E,e as I,f as $,r as l,C as T,h as v,j as e,i as F,c as q}from"./index-CBmW86xF.js";import{g as O}from"./productService-BlOT3nD4.js";import{P as D}from"./ProductCard-Gfho8Bb4.js";import"./eye-Dk14oU6n.js";import"./star-Di-s-6Vk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=p("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=p("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=p("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=p("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),J=()=>{var R,C,L;const{category:u,subcategory:g}=E(),[c,N]=I(),{searchResults:f,searchQuery:d,clearSearch:U}=$(),[z,H]=l.useState(!1),[y,k]=l.useState([]),[K,w]=l.useState(!0),[m,x]=l.useState("grid"),[b,S]=l.useState(!1),[r,j]=l.useState({category:u||"",subcategory:"",sortBy:"featured"}),i=T.find(s=>s.slug===u||s.id===u);l.useEffect(()=>{(async()=>{console.log("ðŸ”„ Loading user products..."),w(!0);try{const a=await O();console.log("ðŸ“¦ Loaded user products:",a),console.log("ðŸ“Š Number of products:",a.length),k(a)}catch(a){console.error("âŒ Failed to load user products:",a),k([])}finally{w(!1)}})()},[]),l.useEffect(()=>{j(s=>({...s,category:u||"",subcategory:g||c.get("subcategory")||"",sortBy:c.get("sort")||"featured",priceRange:c.get("minPrice")&&c.get("maxPrice")?[parseInt(c.get("minPrice")),parseInt(c.get("maxPrice"))]:void 0,material:c.get("material")||void 0,brand:c.get("brand")||void 0,inStock:c.get("inStock")?c.get("inStock")==="true":void 0}))},[u,g,c]);const h=l.useMemo(()=>{console.log("ðŸŽ¯ Filtering products..."),console.log("ðŸ“¥ User products:",y),console.log("ðŸ“‹ Sample products count:",v.length),console.log("ðŸ” Search query:",d),console.log("ðŸ”Ž Search results:",f);let s=d?f:[...v,...y];switch(console.log("ðŸ”€ Combined products:",s),console.log("ðŸ“Š Total products count:",s.length),r.category&&(s=s.filter(a=>a.category===r.category||a.category===(i==null?void 0:i.id))),r.subcategory&&(s=s.filter(a=>a.subcategory===r.subcategory)),r.priceRange&&(s=s.filter(a=>a.price>=r.priceRange[0]&&a.price<=r.priceRange[1])),r.material&&(s=s.filter(a=>{var t;return(t=a.material)==null?void 0:t.toLowerCase().includes(r.material.toLowerCase())})),r.brand&&(s=s.filter(a=>{var t;return(t=a.brand)==null?void 0:t.toLowerCase().includes(r.brand.toLowerCase())})),r.inStock!==void 0&&(s=s.filter(a=>a.inStock===r.inStock)),r.sortBy){case"price-low":s.sort((a,t)=>a.price-t.price);break;case"price-high":s.sort((a,t)=>t.price-a.price);break;case"newest":s.sort((a,t)=>new Date(t.createdAt).getTime()-new Date(a.createdAt).getTime());break;case"name":s.sort((a,t)=>a.name.localeCompare(t.name));break;case"featured":default:s.sort((a,t)=>a.featured&&!t.featured?-1:!a.featured&&t.featured?1:0)}return s},[r,f,d,i,y]);l.useEffect(()=>{if(r.category===""&&r.subcategory==="")return;const s=new URLSearchParams;r.subcategory&&r.subcategory!==g&&s.set("subcategory",r.subcategory),r.sortBy&&r.sortBy!=="featured"&&s.set("sort",r.sortBy),r.priceRange&&(s.set("minPrice",r.priceRange[0].toString()),s.set("maxPrice",r.priceRange[1].toString())),r.material&&s.set("material",r.material),r.brand&&s.set("brand",r.brand),r.inStock!==void 0&&s.set("inStock",r.inStock.toString());const a=c.toString(),t=s.toString();a!==t&&N(s,{replace:!0})},[r.sortBy,r.priceRange,r.material,r.brand,r.inStock]);const o=l.useMemo(()=>{const s=v;return{materials:[...new Set(s.map(a=>a.material).filter(Boolean))],brands:[...new Set(s.map(a=>a.brand).filter(Boolean))],priceRange:{min:Math.min(...s.map(a=>a.price)),max:Math.max(...s.map(a=>a.price))}}},[]),n=(s,a)=>{j(t=>({...t,[s]:a}))},P=()=>{j({category:u||"",subcategory:g||"",sortBy:"featured"}),N({},{replace:!0}),U()};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:d?`Search Results for "${d}"`:(i==null?void 0:i.name)||"All Products"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[h.length," product",h.length!==1?"s":""," found"]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded ${m==="grid"?"bg-white shadow":""}`,children:e.jsx(B,{size:20})}),e.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded ${m==="list"?"bg-white shadow":""}`,children:e.jsx(A,{size:20})})]}),e.jsxs("select",{value:r.sortBy,onChange:s=>n("sortBy",s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A to Z"})]}),e.jsxs("button",{onClick:()=>S(!b),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(M,{size:20}),e.jsx("span",{children:"Filters"})]})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>S(!b),className:"flex items-center space-x-2 px-3 py-2 bg-mustard text-black rounded-lg hover:bg-yellow-400",children:[e.jsx(M,{size:16}),e.jsx("span",{children:"Filter"})]}),e.jsxs("select",{value:r.sortBy,onChange:s=>n("sortBy",s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"price-low",children:"Price â†‘"}),e.jsx("option",{value:"price-high",children:"Price â†“"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded ${m==="grid"?"bg-white shadow":""}`,children:e.jsx(B,{size:16})}),e.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded ${m==="list"?"bg-white shadow":""}`,children:e.jsx(A,{size:16})})]})]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b&&e.jsxs("div",{className:"lg:w-64 bg-white rounded-lg p-6 h-fit",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Filters"}),e.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear All"})]}),(i==null?void 0:i.subcategories)&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Category"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"subcategory",checked:!r.subcategory,onChange:()=>n("subcategory",""),className:"text-black focus:ring-black"}),e.jsxs("span",{children:["All ",i.name]})]}),i.subcategories.map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"subcategory",checked:r.subcategory===s.slug,onChange:()=>n("subcategory",s.slug),className:"text-black focus:ring-black"}),e.jsx("span",{children:s.name})]},s.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Price Range (PKR)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"range",min:o.priceRange.min,max:o.priceRange.max,value:((R=r.priceRange)==null?void 0:R[1])||o.priceRange.max,onChange:s=>{var t;const a=parseInt(s.target.value);n("priceRange",[((t=r.priceRange)==null?void 0:t[0])||o.priceRange.min,a])},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:F(((C=r.priceRange)==null?void 0:C[0])||o.priceRange.min)}),e.jsx("span",{children:F(((L=r.priceRange)==null?void 0:L[1])||o.priceRange.max)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Material"}),e.jsxs("select",{value:r.material||"",onChange:s=>n("material",s.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"",children:"All Materials"}),o.materials.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Brand"}),e.jsxs("select",{value:r.brand||"",onChange:s=>n("brand",s.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"",children:"All Brands"}),o.brands.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Availability"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.inStock===!0,onChange:s=>n("inStock",s.target.checked?!0:void 0),className:"text-black focus:ring-black"}),e.jsx("span",{children:"In Stock Only"})]})]})]}),e.jsx("div",{className:"flex-1",children:z?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(q,{size:"lg"})}):h.length>0?e.jsx("div",{className:`grid gap-6 ${m==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:h.map(s=>e.jsx(D,{product:s,className:m==="list"?"flex flex-row":""},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(G,{className:"text-gray-400",size:32})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Products Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d?`No products match your search for "${d}"`:"No products match your current filters"}),e.jsx("button",{onClick:P,className:"bg-mustard text-black px-6 py-3 rounded-lg hover:bg-yellow-400 transition-colors",children:"Clear Filters"})]})})]})})]})};export{J as default};
